<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>fp_watermarker: bin_watermarking.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>bin_watermarking.c File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;pbm.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
<code>#include &quot;flippability.h&quot;</code><br/>
<code>#include &quot;shuffling.h&quot;</code><br/>
<code>#include &quot;bin_watermarking.h&quot;</code><br/>
<div class="dynheader">
Include dependency graph for bin_watermarking.c:</div>
<div class="dyncontent">
<div class="center"><img src="bin__watermarking_8c__incl.png" border="0" usemap="#bin__watermarking_8c" alt=""/></div>
<map name="bin__watermarking_8c" id="bin__watermarking_8c">
<area shape="rect" id="node11" href="flippability_8h_source.html" title="flippability.h" alt="" coords="368,83,461,112"/><area shape="rect" id="node13" href="shuffling_8h_source.html" title="shuffling.h" alt="" coords="485,83,571,112"/><area shape="rect" id="node15" href="bin__watermarking_8h_source.html" title="bin_watermarking.h" alt="" coords="595,83,741,112"/></map>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpos__score.html">pos_score</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a65b67a11e079f5ad31967e7ad69ad72c"></a><!-- doxytag: member="bin_watermarking.c::pushbit" ref="a65b67a11e079f5ad31967e7ad69ad72c" args="(word, bit)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>pushbit</b>(word, bit)&nbsp;&nbsp;&nbsp;(((word &lt;&lt; 1) + bit) &amp; 0x1ff)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a13993dc9f705f946a73606cfeeabd428"></a><!-- doxytag: member="bin_watermarking.c::sort_by_flippability" ref="a13993dc9f705f946a73606cfeeabd428" args="(struct pos_score *flippables, int window, int *hd, struct image img, float *lut)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>sort_by_flippability</b> (struct <a class="el" href="structpos__score.html">pos_score</a> *flippables, int window, int *hd, struct <a class="el" href="structimage.html">image</a> img, float *lut)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a58b765f52b46254903c5eef722a50153"></a><!-- doxytag: member="bin_watermarking.c::sum_of_blacks" ref="a58b765f52b46254903c5eef722a50153" args="(struct image img, int *hd, int window)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>sum_of_blacks</b> (struct <a class="el" href="structimage.html">image</a> img, int *hd, int window)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a767293a8435cffdcf1fc0e59729aa4f8"></a><!-- doxytag: member="bin_watermarking.c::flip_pixels" ref="a767293a8435cffdcf1fc0e59729aa4f8" args="(struct image img, struct pos_score *flippables, int array_size, int N_pix, const int color)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>flip_pixels</b> (struct <a class="el" href="structimage.html">image</a> img, struct <a class="el" href="structpos__score.html">pos_score</a> *flippables, int array_size, int N_pix, const int color)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3e3480c1704167fcb6231326a435d42b"></a><!-- doxytag: member="bin_watermarking.c::evaluate" ref="a3e3480c1704167fcb6231326a435d42b" args="(struct image img, int pos, float *lut)" -->
float&nbsp;</td><td class="memItemRight" valign="bottom"><b>evaluate</b> (struct <a class="el" href="structimage.html">image</a> img, int pos, float *lut)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8b5302239d2641e48197f9164ce573d0"></a><!-- doxytag: member="bin_watermarking.c::compar" ref="a8b5302239d2641e48197f9164ce573d0" args="(const void *l, const void *r)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>compar</b> (const void *l, const void *r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin__watermarking_8c.html#a0a9abc16b6f8a6257a6aab4b6e74ffb0">embed</a> (struct <a class="el" href="structimage.html">image</a> img, void *payload, size_t bytes)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin__watermarking_8c.html#a122521ae41b50f50c06315db165e67a8">extract</a> (struct <a class="el" href="structimage.html">image</a> img, void *payload, size_t bytes)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This module implements the data embedding/extraction in/from an image. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a0a9abc16b6f8a6257a6aab4b6e74ffb0"></a><!-- doxytag: member="bin_watermarking.c::embed" ref="a0a9abc16b6f8a6257a6aab4b6e74ffb0" args="(struct image img, void *payload, size_t bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void embed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structimage.html">image</a>&nbsp;</td>
          <td class="paramname"> <em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>bytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function implements the data embedding functionality. It scans the image with the sliding window end flipps the pixels when needed, to establish the relationship with the payload. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>img</em>&nbsp;</td><td>This struct represents the original image at the input, and at the output is the modified one. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>payload</em>&nbsp;</td><td>A void * to the data to be embedded. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bytes</em>&nbsp;</td><td>The size of the payload. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bin__watermarking_8c_a0a9abc16b6f8a6257a6aab4b6e74ffb0_cgraph.png" border="0" usemap="#bin__watermarking_8c_a0a9abc16b6f8a6257a6aab4b6e74ffb0_cgraph" alt=""/></div>
<map name="bin__watermarking_8c_a0a9abc16b6f8a6257a6aab4b6e74ffb0_cgraph" id="bin__watermarking_8c_a0a9abc16b6f8a6257a6aab4b6e74ffb0_cgraph">
<area shape="rect" id="node3" href="flippability_8c.html#a814ccabcf5a9414b71b209269b2467a8" title="init_flippability_lut" alt="" coords="133,5,267,35"/><area shape="rect" id="node5" href="shuffling_8c.html#ab097698ab6acf4fe21e0033e0b093bcd" title="random_permutation" alt="" coords="121,59,279,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a122521ae41b50f50c06315db165e67a8"></a><!-- doxytag: member="bin_watermarking.c::extract" ref="a122521ae41b50f50c06315db165e67a8" args="(struct image img, void *payload, size_t bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void extract </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structimage.html">image</a>&nbsp;</td>
          <td class="paramname"> <em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>bytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The symmetrical counterpart of embed, scans the image with the exact same window as embed and counts the black pixels. If they are 3(2k) it assigns to the next bit of the payload 0 and if the sum of blacks is 3(2k + 1) it assignes 1. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>img</em>&nbsp;</td><td>The struct representing the watermarked image </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bytes</em>&nbsp;</td><td>The size of the payload which means the caller must provide the exact size of the embedded data. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>payload</em>&nbsp;</td><td>The extracted data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bin__watermarking_8c_a122521ae41b50f50c06315db165e67a8_cgraph.png" border="0" usemap="#bin__watermarking_8c_a122521ae41b50f50c06315db165e67a8_cgraph" alt=""/></div>
<map name="bin__watermarking_8c_a122521ae41b50f50c06315db165e67a8_cgraph" id="bin__watermarking_8c_a122521ae41b50f50c06315db165e67a8_cgraph">
<area shape="rect" id="node3" href="shuffling_8c.html#ab097698ab6acf4fe21e0033e0b093bcd" title="random_permutation" alt="" coords="121,5,279,35"/></map>
</div>
</p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Sep 13 2011 02:51:35 for fp_watermarker by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
